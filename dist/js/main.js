"use strict";

jQuery(function () {
  //// Navbar
  $(".nav-link").on("click", function () {
    // 1) Remove class show when click link
    $(this).parentsUntil("navbar-collapse").removeClass("show");
    // 2) Get name id section
    var getIdSection = $(this).data("section");
    // 3) Got to section
    $("html, body").animate({
      scrollTop: $("#" + getIdSection).offset().top
    }, 1000);
  });

  //
  var getDirPage = $("html").attr("dir");

  // Header slider
  $(".header__slider, .testimonial").slick({
    infinite: false,
    slidesToShow: 1,
    slidesToScroll: 1,
    autoplay: true,
    autoplaySpeed: 5000,
    arrows: true,
    rtl: $("html").attr("dir") === "rtl" ? true : false,
    prevArrow: "<svg class='a-left control-c prev slick-prev'>\n    <use xlink:href=\"../icons/sprite.svg#icon-Angle-Left\">\n    </svg>",
    nextArrow: "<svg class='a-right control-c next slick-next'>\n    <use xlink:href=\"../icons/sprite.svg#icon-Angle-Right\">\n    </svg>"
  });

  // Blog slider
  $(".blog__article").slick({
    infinite: false,
    slidesToShow: 2,
    slidesToScroll: 2,
    autoplay: true,
    autoplaySpeed: 5000,
    dots: true,
    arrows: false,
    appendDots: $(".placeholder"),
    responsive: [{
      breakpoint: 600,
      settings: {
        slidesToShow: 1,
        slidesToScroll: 1,
        dots: false
      }
    }],
    rtl: $("html").attr("dir") === "rtl" ? true : false
  });

  // Section gallery
  $(".our-works__btn-gallery .btn").on("click", function () {
    // 1) Get id when click the button
    var classSelect = $(this).data("select");
    // 2) Add class active on select button then remove class active from all siblings
    $(this).addClass("active").siblings().removeClass("active");
    // 3) Filter with all images
    $(".our-works__gallery__image").filter(function (i, cur) {
      $(cur).hasClass(classSelect) ? $(cur).removeClass("opacity") : $(cur).addClass("opacity");
    });
  });

  // Scroll document
  $(document).on("scroll", function () {
    // Each for all sections
    $("body section").each(function () {
      // 1) Get id section
      var idSection = $(this).attr("id");
      // 2) Check if scroll top greather than or equal this section
      if ($(document).scrollTop() >= $(this).offset().top) {
        // 3) Finaly filter on all nav link and check if this section data section equal section above scroll top
        $(".nav-link").filter(function () {
          $(this).data("section") == idSection ? $(this).addClass("active-link") : $(this).removeClass("active-link");
        });
      }
    });

    //
    var getSectionAbout = $("#about-us").offset().top;
    //
    $(document).scrollTop() >= getSectionAbout ? $("#scrollUp").addClass("fadeIn") : $("#scrollUp").removeClass("fadeIn");
  });

  // Scroll up document
  $("#scrollUp").on("click", function () {
    $("html, body").animate({
      scrollTop: 0
    }, 1000);
  });

  // Change direction page
  $(".change_lang").on("change", function () {
    // 1) Get lang when change lang
    var getLang = $(this).val().replace("#", "");
    // 2)
    if (getLang === "ar") {
      $("html").attr({ dir: "rtl", lang: "ar" });
    } else {
      $("html").attr({ dir: "ltr", lang: "en" });
    }
    //
    $(".slick-slider").addClass("direction-ltr");
  });

  //
  // All images
  var allImages = $("[data-src]");

  // Preload image
  function preloadImages(img) {
    var src = $(img).data("src");

    if (!src) return;

    img.src = src;

    $(img).removeAttr("data-src");
  }

  //
  var ImageObServer = new IntersectionObserver(function (entries, ImageObServer) {
    $(entries).each(function (i, cur) {
      if (!cur.isIntersecting) {
        cur.target.classList.add("fadeOut");
        return;
      } else {
        //
        preloadImages(cur.target);
        cur.target.classList.remove("fadeOut");
        cur.target.classList.add("fadeIn");
        ImageObServer.unobserve(cur.target);
      }
    });
  }, {
    threshold: 0
  });

  //
  allImages.each(function (i, cur) {
    return ImageObServer.observe(cur);
  });
});
"use strict";

// TRANSLATING
function translating(_ref) {
  var _ref$changeLang = _ref.changeLang,
      changeLang = _ref$changeLang === undefined ? ".change_lang" : _ref$changeLang,
      _ref$classParentTrans = _ref.classParentTrans,
      classParentTrans = _ref$classParentTrans === undefined ? ".translate" : _ref$classParentTrans,
      objTranslate = _ref.objTranslate,
      _ref$langStartLoad = _ref.langStartLoad,
      langStartLoad = _ref$langStartLoad === undefined ? "ar" : _ref$langStartLoad,
      _ref$statusLocalStora = _ref.statusLocalStorage,
      statusLocalStorage = _ref$statusLocalStora === undefined ? false : _ref$statusLocalStora;

  // ALL VARIABLES
  var btnLang = document.querySelector(changeLang);

  // CHANGE DIR AND LANG
  function changeSomeMeta(lang) {
    if (lang == "ar") {
      document.dir = "rtl";
      // document.body.classList.add("arabic");
    } else {
      document.dir = "ltr";
      // document.body.classList.remove("arabic");
    }
    document.lang = lang;
  }

  // ADD EVENT LISTENER WILL BE CHANGE LANGUAGE
  btnLang.addEventListener("change", function () {
    // IF BTN NOT EQUAL HASH WILL BE STOP FUNCTION IF NOT WILL BE RUNINNG ALL ACTIONS INTO FUNCTION
    // TEXT BTN
    var textBtn = this.value.replace("#", "");
    console.log(textBtn);

    // RUNINNG CHANGE SOME META
    changeSomeMeta(textBtn);
    // RUNINNG SET LOCAL STORAGE
    // setLocalStorage(textBtn);
    //
    // location.href = `#${textBtn}`;
    location.reload();
  });

  // EVENT LISTENER EVENT HASH CHANGE WILL BE CHANGE HASH
  window.addEventListener("hashchange", function (e) {
    // VAR RETURN NEW HASH
    var newUrl = e.newURL.split("#").pop();
    // console.log(newUrl);
    // translating({ langStartLoad: newUrl, statusLocalStorage: true });
  });

  // LOCAL STORAGE
  function setLocalStorage(newLang) {
    // IF STATUS LOCAL STORAGE EQUAL TRUE WILL BE SET LOCAL STORAGE
    if (statusLocalStorage) localStorage.setItem("language", newLang);
  }

  //
  // (function () {
  //   let setLang = null;
  //   //
  //   if (statusLocalStorage) {
  //     let getLocalStorage = localStorage.getItem("language");
  //     setLang = `#${getLocalStorage}`;
  //   } else {
  //     setLang = `#${langStartLoad}`;
  //   }

  //   btnLang.value = setLang;

  //   // btnLang.dispatchEvent(new Event("change"));

  //   // // RUNINNG CHANGE SOME META
  //   // changeSomeMeta(setLang.replace("#", "").trim());
  //   // //
  //   // setLocalStorage(setLang.replace("#", "").trim());
  //   // // RUNINNG TRANSLATE ELEMENT
  //   // translateElement(classParentTrans, objTranslate, setLang);
  //   // //
  //   // location.href = `${setLang}`;
  // })();
}

// translating({});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJ0cmFuc2xhdGUuanMiXSwibmFtZXMiOlsialF1ZXJ5IiwiJCIsIm9uIiwicGFyZW50c1VudGlsIiwicmVtb3ZlQ2xhc3MiLCJnZXRJZFNlY3Rpb24iLCJkYXRhIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsImdldERpclBhZ2UiLCJhdHRyIiwic2xpY2siLCJpbmZpbml0ZSIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwiYXJyb3dzIiwicnRsIiwicHJldkFycm93IiwibmV4dEFycm93IiwiZG90cyIsImFwcGVuZERvdHMiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiY2xhc3NTZWxlY3QiLCJhZGRDbGFzcyIsInNpYmxpbmdzIiwiZmlsdGVyIiwiaSIsImN1ciIsImhhc0NsYXNzIiwiZG9jdW1lbnQiLCJlYWNoIiwiaWRTZWN0aW9uIiwiZ2V0U2VjdGlvbkFib3V0IiwiZ2V0TGFuZyIsInZhbCIsInJlcGxhY2UiLCJkaXIiLCJsYW5nIiwiYWxsSW1hZ2VzIiwicHJlbG9hZEltYWdlcyIsImltZyIsInNyYyIsInJlbW92ZUF0dHIiLCJJbWFnZU9iU2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiaXNJbnRlcnNlY3RpbmciLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ1bm9ic2VydmUiLCJ0aHJlc2hvbGQiLCJvYnNlcnZlIiwidHJhbnNsYXRpbmciLCJjaGFuZ2VMYW5nIiwiY2xhc3NQYXJlbnRUcmFucyIsIm9ialRyYW5zbGF0ZSIsImxhbmdTdGFydExvYWQiLCJzdGF0dXNMb2NhbFN0b3JhZ2UiLCJidG5MYW5nIiwicXVlcnlTZWxlY3RvciIsImNoYW5nZVNvbWVNZXRhIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRleHRCdG4iLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJsb2NhdGlvbiIsInJlbG9hZCIsIndpbmRvdyIsImUiLCJuZXdVcmwiLCJuZXdVUkwiLCJzcGxpdCIsInBvcCIsInNldExvY2FsU3RvcmFnZSIsIm5ld0xhbmciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxPQUFPLFlBQVk7QUFDakI7QUFDQUMsSUFBRSxXQUFGLEVBQWVDLEVBQWYsQ0FBa0IsT0FBbEIsRUFBMkIsWUFBWTtBQUNyQztBQUNBRCxNQUFFLElBQUYsRUFBUUUsWUFBUixDQUFxQixpQkFBckIsRUFBd0NDLFdBQXhDLENBQW9ELE1BQXBEO0FBQ0E7QUFDQSxRQUFNQyxlQUFlSixFQUFFLElBQUYsRUFBUUssSUFBUixDQUFhLFNBQWIsQ0FBckI7QUFDQTtBQUNBTCxNQUFFLFlBQUYsRUFBZ0JNLE9BQWhCLENBQ0U7QUFDRUMsaUJBQVdQLFFBQU1JLFlBQU4sRUFBc0JJLE1BQXRCLEdBQStCQztBQUQ1QyxLQURGLEVBSUUsSUFKRjtBQU1ELEdBWkQ7O0FBY0E7QUFDQSxNQUFJQyxhQUFhVixFQUFFLE1BQUYsRUFBVVcsSUFBVixDQUFlLEtBQWYsQ0FBakI7O0FBRUE7QUFDQVgsSUFBRSwrQkFBRixFQUFtQ1ksS0FBbkMsQ0FBeUM7QUFDdkNDLGNBQVUsS0FENkI7QUFFdkNDLGtCQUFjLENBRnlCO0FBR3ZDQyxvQkFBZ0IsQ0FIdUI7QUFJdkNDLGNBQVUsSUFKNkI7QUFLdkNDLG1CQUFlLElBTHdCO0FBTXZDQyxZQUFRLElBTitCO0FBT3ZDQyxTQUFLbkIsRUFBRSxNQUFGLEVBQVVXLElBQVYsQ0FBZSxLQUFmLE1BQTBCLEtBQTFCLEdBQWtDLElBQWxDLEdBQXlDLEtBUFA7QUFRdkNTLHlJQVJ1QztBQVd2Q0M7QUFYdUMsR0FBekM7O0FBZ0JBO0FBQ0FyQixJQUFFLGdCQUFGLEVBQW9CWSxLQUFwQixDQUEwQjtBQUN4QkMsY0FBVSxLQURjO0FBRXhCQyxrQkFBYyxDQUZVO0FBR3hCQyxvQkFBZ0IsQ0FIUTtBQUl4QkMsY0FBVSxJQUpjO0FBS3hCQyxtQkFBZSxJ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LEVBQW9CQyxHQUFwQixFQUFmO0FBQ0E7QUFDQTtBQUVELEdBTkQ7O0FBUUE7QUFDQSxXQUFTQyxlQUFULENBQXlCQyxPQUF6QixFQUFrQztBQUNoQztBQUNBLFFBQUlsQixrQkFBSixFQUF3Qm1CLGFBQWFDLE9BQWIsQ0FBcUIsVUFBckIsRUFBaUNGLE9BQWpDO0FBQ3pCOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEOztBQUVEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJqUXVlcnkoZnVuY3Rpb24gKCkge1xuICAvLy8vIE5hdmJhclxuICAkKFwiLm5hdi1saW5rXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIC8vIDEpIFJlbW92ZSBjbGFzcyBzaG93IHdoZW4gY2xpY2sgbGlua1xuICAgICQodGhpcykucGFyZW50c1VudGlsKFwibmF2YmFyLWNvbGxhcHNlXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcbiAgICAvLyAyKSBHZXQgbmFtZSBpZCBzZWN0aW9uXG4gICAgY29uc3QgZ2V0SWRTZWN0aW9uID0gJCh0aGlzKS5kYXRhKFwic2VjdGlvblwiKTtcbiAgICAvLyAzKSBHb3QgdG8gc2VjdGlvblxuICAgICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoXG4gICAgICB7XG4gICAgICAgIHNjcm9sbFRvcDogJChgIyR7Z2V0SWRTZWN0aW9ufWApLm9mZnNldCgpLnRvcCxcbiAgICAgIH0sXG4gICAgICAxMDAwXG4gICAgKTtcbiAgfSk7XG5cbiAgLy9cbiAgbGV0IGdldERpclBhZ2UgPSAkKFwiaHRtbFwiKS5hdHRyKFwiZGlyXCIpO1xuXG4gIC8vIEhlYWRlciBzbGlkZXJcbiAgJChcIi5oZWFkZXJfX3NsaWRlciwgLnRlc3RpbW9uaWFsXCIpLnNsaWNrKHtcbiAgICBpbmZpbml0ZTogZmFsc2UsXG4gICAgc2xpZGVzVG9TaG93OiAxLFxuICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDAsXG4gICAgYXJyb3dzOiB0cnVlLFxuICAgIHJ0bDogJChcImh0bWxcIikuYXR0cihcImRpclwiKSA9PT0gXCJydGxcIiA/IHRydWUgOiBmYWxzZSxcbiAgICBwcmV2QXJyb3c6IGA8c3ZnIGNsYXNzPSdhLWxlZnQgY29udHJvbC1jIHByZXYgc2xpY2stcHJldic+XG4gICAgPHVzZSB4bGluazpocmVmPVwiLi4vaWNvbnMvc3ByaXRlLnN2ZyNpY29uLUFuZ2xlLUxlZnRcIj5cbiAgICA8L3N2Zz5gLFxuICAgIG5leHRBcnJvdzogYDxzdmcgY2xhc3M9J2EtcmlnaHQgY29udHJvbC1jIG5leHQgc2xpY2stbmV4dCc+XG4gICAgPHVzZSB4bGluazpocmVmPVwiLi4vaWNvbnMvc3ByaXRlLnN2ZyNpY29uLUFuZ2xlLVJpZ2h0XCI+XG4gICAgPC9zdmc+YCxcbiAgfSk7XG5cbiAgLy8gQmxvZyBzbGlkZXJcbiAgJChcIi5ibG9nX19hcnRpY2xlXCIpLnNsaWNrKHtcbiAgICBpbmZpbml0ZTogZmFsc2UsXG4gICAgc2xpZGVzVG9TaG93OiAyLFxuICAgIHNsaWRlc1RvU2Nyb2xsOiAyLFxuICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDAsXG4gICAgZG90czogdHJ1ZSxcbiAgICBhcnJvd3M6IGZhbHNlLFxuICAgIGFwcGVuZERvdHM6ICQoXCIucGxhY2Vob2xkZXJcIiksXG4gICAgcmVzcG9uc2l2ZTogW1xuICAgICAge1xuICAgICAgICBicmVha3BvaW50OiA2MDAsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJ0bDogJChcImh0bWxcIikuYXR0cihcImRpclwiKSA9PT0gXCJydGxcIiA/IHRydWUgOiBmYWxzZSxcbiAgfSk7XG5cbiAgLy8gU2VjdGlvbiBnYWxsZXJ5XG4gICQoXCIub3VyLXdvcmtzX19idG4tZ2FsbGVyeSAuYnRuXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIC8vIDEpIEdldCBpZCB3aGVuIGNsaWNrIHRoZSBidXR0b25cbiAgICBjb25zdCBjbGFzc1NlbGVjdCA9ICQodGhpcykuZGF0YShcInNlbGVjdFwiKTtcbiAgICAvLyAyKSBBZGQgY2xhc3MgYWN0aXZlIG9uIHNlbGVjdCBidXR0b24gdGhlbiByZW1vdmUgY2xhc3MgYWN0aXZlIGZyb20gYWxsIHNpYmxpbmdzXG4gICAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgIC8vIDMpIEZpbHRlciB3aXRoIGFsbCBpbWFnZXNcbiAgICAkKFwiLm91ci13b3Jrc19fZ2FsbGVyeV9faW1hZ2VcIikuZmlsdGVyKChpLCBjdXIpID0+IHtcbiAgICAgICQoY3VyKS5oYXNDbGFzcyhjbGFzc1NlbGVjdCkgPyAkKGN1cikucmVtb3ZlQ2xhc3MoXCJvcGFjaXR5XCIpIDogJChjdXIpLmFkZENsYXNzKFwib3BhY2l0eVwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gU2Nyb2xsIGRvY3VtZW50XG4gICQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBFYWNoIGZvciBhbGwgc2VjdGlvbnNcbiAgICAkKFwiYm9keSBzZWN0aW9uXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgLy8gMSkgR2V0IGlkIHNlY3Rpb25cbiAgICAgIGNvbnN0IGlkU2VjdGlvbiA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuICAgICAgLy8gMikgQ2hlY2sgaWYgc2Nyb2xsIHRvcCBncmVhdGhlciB0aGFuIG9yIGVxdWFsIHRoaXMgc2VjdGlvblxuICAgICAgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID49ICQodGhpcykub2Zmc2V0KCkudG9wKSB7XG4gICAgICAgIC8vIDMpIEZpbmFseSBmaWx0ZXIgb24gYWxsIG5hdiBsaW5rIGFuZCBjaGVjayBpZiB0aGlzIHNlY3Rpb24gZGF0YSBzZWN0aW9uIGVxdWFsIHNlY3Rpb24gYWJvdmUgc2Nyb2xsIHRvcFxuICAgICAgICAkKFwiLm5hdi1saW5rXCIpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCh0aGlzKS5kYXRhKFwic2VjdGlvblwiKSA9PSBpZFNlY3Rpb25cbiAgICAgICAgICAgID8gJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZS1saW5rXCIpXG4gICAgICAgICAgICA6ICQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmUtbGlua1wiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvL1xuICAgIGNvbnN0IGdldFNlY3Rpb25BYm91dCA9ICQoXCIjYWJvdXQtdXNcIikub2Zmc2V0KCkudG9wO1xuICAgIC8vXG4gICAgJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gZ2V0U2VjdGlvbkFib3V0XG4gICAgICA/ICQoXCIjc2Nyb2xsVXBcIikuYWRkQ2xhc3MoXCJmYWRlSW5cIilcbiAgICAgIDogJChcIiNzY3JvbGxVcFwiKS5yZW1vdmVDbGFzcyhcImZhZGVJblwiKTtcbiAgfSk7XG5cbiAgLy8gU2Nyb2xsIHVwIGRvY3VtZW50XG4gICQoXCIjc2Nyb2xsVXBcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgJChcImh0bWwsIGJvZHlcIikuYW5pbWF0ZShcbiAgICAgIHtcbiAgICAgICAgc2Nyb2xsVG9wOiAwLFxuICAgICAgfSxcbiAgICAgIDEwMDBcbiAgICApO1xuICB9KTtcblxuICAvLyBDaGFuZ2UgZGlyZWN0aW9uIHBhZ2VcbiAgJChcIi5jaGFuZ2VfbGFuZ1wiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gMSkgR2V0IGxhbmcgd2hlbiBjaGFuZ2UgbGFuZ1xuICAgIGNvbnN0IGdldExhbmcgPSAkKHRoaXMpLnZhbCgpLnJlcGxhY2UoXCIjXCIsIFwiXCIpO1xuICAgIC8vIDIpXG4gICAgaWYgKGdldExhbmcgPT09IFwiYXJcIikge1xuICAgICAgJChcImh0bWxcIikuYXR0cih7IGRpcjogXCJydGxcIiwgbGFuZzogXCJhclwiIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKFwiaHRtbFwiKS5hdHRyKHsgZGlyOiBcImx0clwiLCBsYW5nOiBcImVuXCIgfSk7XG4gICAgfVxuICAgIC8vXG4gICAgJChcIi5zbGljay1zbGlkZXJcIikuYWRkQ2xhc3MoXCJkaXJlY3Rpb24tbHRyXCIpO1xuICB9KTtcblxuICAvL1xuICAvLyBBbGwgaW1hZ2VzXG4gIGNvbnN0IGFsbEltYWdlcyA9ICQoXCJbZGF0YS1zcmNdXCIpO1xuXG4gIC8vIFByZWxvYWQgaW1hZ2VcbiAgZnVuY3Rpb24gcHJlbG9hZEltYWdlcyhpbWcpIHtcbiAgICBjb25zdCBzcmMgPSAkKGltZykuZGF0YShcInNyY1wiKTtcblxuICAgIGlmICghc3JjKSByZXR1cm47XG5cbiAgICBpbWcuc3JjID0gc3JjO1xuXG4gICAgJChpbWcpLnJlbW92ZUF0dHIoXCJkYXRhLXNyY1wiKTtcbiAgfVxuXG4gIC8vXG4gIGNvbnN0IEltYWdlT2JTZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgKGVudHJpZXMsIEltYWdlT2JTZXJ2ZXIpID0+IHtcbiAgICAgICQoZW50cmllcykuZWFjaCgoaSwgY3VyKSA9PiB7XG4gICAgICAgIGlmICghY3VyLmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgY3VyLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiZmFkZU91dFwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9cbiAgICAgICAgICBwcmVsb2FkSW1hZ2VzKGN1ci50YXJnZXQpO1xuICAgICAgICAgIGN1ci50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImZhZGVPdXRcIik7XG4gICAgICAgICAgY3VyLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiZmFkZUluXCIpO1xuICAgICAgICAgIEltYWdlT2JTZXJ2ZXIudW5vYnNlcnZlKGN1ci50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHtcbiAgICAgIHRocmVzaG9sZDogMCxcbiAgICB9XG4gICk7XG5cbiAgLy9cbiAgYWxsSW1hZ2VzLmVhY2goKGksIGN1cikgPT4gSW1hZ2VPYlNlcnZlci5vYnNlcnZlKGN1cikpO1xufSk7XG4iLCIvLyBUUkFOU0xBVElOR1xuZnVuY3Rpb24gdHJhbnNsYXRpbmcoe1xuICBjaGFuZ2VMYW5nID0gXCIuY2hhbmdlX2xhbmdcIixcbiAgY2xhc3NQYXJlbnRUcmFucyA9IFwiLnRyYW5zbGF0ZVwiLFxuICBvYmpUcmFuc2xhdGUsXG4gIGxhbmdTdGFydExvYWQgPSBcImFyXCIsXG4gIHN0YXR1c0xvY2FsU3RvcmFnZSA9IGZhbHNlLFxufSkge1xuICAvLyBBTEwgVkFSSUFCTEVTXG4gIGNvbnN0IGJ0bkxhbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNoYW5nZUxhbmcpO1xuXG4gIC8vIENIQU5HRSBESVIgQU5EIExBTkdcbiAgZnVuY3Rpb24gY2hhbmdlU29tZU1ldGEobGFuZykge1xuICAgIGlmIChsYW5nID09IFwiYXJcIikge1xuICAgICAgZG9jdW1lbnQuZGlyID0gXCJydGxcIjtcbiAgICAgIC8vIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImFyYWJpY1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuZGlyID0gXCJsdHJcIjtcbiAgICAgIC8vIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImFyYWJpY1wiKTtcbiAgICB9XG4gICAgZG9jdW1lbnQubGFuZyA9IGxhbmc7XG4gIH1cblxuICAvLyBBREQgRVZFTlQgTElTVEVORVIgV0lMTCBCRSBDSEFOR0UgTEFOR1VBR0VcbiAgYnRuTGFuZy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBJRiBCVE4gTk9UIEVRVUFMIEhBU0ggV0lMTCBCRSBTVE9QIEZVTkNUSU9OIElGIE5PVCBXSUxMIEJFIFJVTklOTkcgQUxMIEFDVElPTlMgSU5UTyBGVU5DVElPTlxuICAgIC8vIFRFWFQgQlROXG4gICAgY29uc3QgdGV4dEJ0biA9IHRoaXMudmFsdWUucmVwbGFjZShcIiNcIiwgXCJcIik7XG4gICAgY29uc29sZS5sb2codGV4dEJ0bik7XG4gICAgXG4gICAgLy8gUlVOSU5ORyBDSEFOR0UgU09NRSBNRVRBXG4gICAgY2hhbmdlU29tZU1ldGEodGV4dEJ0bik7XG4gICAgLy8gUlVOSU5ORyBTRVQgTE9DQUwgU1RPUkFHRVxuICAgIC8vIHNldExvY2FsU3RvcmFnZSh0ZXh0QnRuKTtcbiAgICAvL1xuICAgIC8vIGxvY2F0aW9uLmhyZWYgPSBgIyR7dGV4dEJ0bn1gO1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIFxuICB9KTtcblxuICAvLyBFVkVOVCBMSVNURU5FUiBFVkVOVCBIQVNIIENIQU5HRSBXSUxMIEJFIENIQU5HRSBIQVNIXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLCAoZSkgPT4ge1xuICAgIC8vIFZBUiBSRVRVUk4gTkVXIEhBU0hcbiAgICBjb25zdCBuZXdVcmwgPSBlLm5ld1VSTC5zcGxpdChcIiNcIikucG9wKCk7XG4gICAgLy8gY29uc29sZS5sb2cobmV3VXJsKTtcbiAgICAvLyB0cmFuc2xhdGluZyh7IGxhbmdTdGFydExvYWQ6IG5ld1VybCwgc3RhdHVzTG9jYWxTdG9yYWdlOiB0cnVlIH0pO1xuICAgIFxuICB9KTtcblxuICAvLyBMT0NBTCBTVE9SQUdFXG4gIGZ1bmN0aW9uIHNldExvY2FsU3RvcmFnZShuZXdMYW5nKSB7XG4gICAgLy8gSUYgU1RBVFVTIExPQ0FMIFNUT1JBR0UgRVFVQUwgVFJVRSBXSUxMIEJFIFNFVCBMT0NBTCBTVE9SQUdFXG4gICAgaWYgKHN0YXR1c0xvY2FsU3RvcmFnZSkgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJsYW5ndWFnZVwiLCBuZXdMYW5nKTtcbiAgfVxuXG4gIC8vXG4gIC8vIChmdW5jdGlvbiAoKSB7XG4gIC8vICAgbGV0IHNldExhbmcgPSBudWxsO1xuICAvLyAgIC8vXG4gIC8vICAgaWYgKHN0YXR1c0xvY2FsU3RvcmFnZSkge1xuICAvLyAgICAgbGV0IGdldExvY2FsU3RvcmFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibGFuZ3VhZ2VcIik7XG4gIC8vICAgICBzZXRMYW5nID0gYCMke2dldExvY2FsU3RvcmFnZX1gO1xuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICBzZXRMYW5nID0gYCMke2xhbmdTdGFydExvYWR9YDtcbiAgLy8gICB9XG5cbiAgLy8gICBidG5MYW5nLnZhbHVlID0gc2V0TGFuZztcblxuICAvLyAgIC8vIGJ0bkxhbmcuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xuXG4gIC8vICAgLy8gLy8gUlVOSU5ORyBDSEFOR0UgU09NRSBNRVRBXG4gIC8vICAgLy8gY2hhbmdlU29tZU1ldGEoc2V0TGFuZy5yZXBsYWNlKFwiI1wiLCBcIlwiKS50cmltKCkpO1xuICAvLyAgIC8vIC8vXG4gIC8vICAgLy8gc2V0TG9jYWxTdG9yYWdlKHNldExhbmcucmVwbGFjZShcIiNcIiwgXCJcIikudHJpbSgpKTtcbiAgLy8gICAvLyAvLyBSVU5JTk5HIFRSQU5TTEFURSBFTEVNRU5UXG4gIC8vICAgLy8gdHJhbnNsYXRlRWxlbWVudChjbGFzc1BhcmVudFRyYW5zLCBvYmpUcmFuc2xhdGUsIHNldExhbmcpO1xuICAvLyAgIC8vIC8vXG4gIC8vICAgLy8gbG9jYXRpb24uaHJlZiA9IGAke3NldExhbmd9YDtcbiAgLy8gfSkoKTtcbn1cblxuLy8gdHJhbnNsYXRpbmcoe30pO1xuIl19
